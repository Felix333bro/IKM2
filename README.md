Бочкарёв ИТ-16-2024

Задача 20: Написать программу, которая по заданной формуле строит дерево и производит вычисления с помощью построенного дерева. Формула задана в традиционной инфиксной записи, в ней могут быть скобки, максимальная степень вложенности которых ограничивается числом 10. Аргументами могут быть целые числа и переменные, задаваемые однобуквенными именами. Допустимые операции: +, -, *, /. Унарный минус допустим. С помощью построенного дерева формулы упростить формулу, заменяя в ней все поддеревья, соответствующие формулам (f1*f3±f2*f3) и (f1*f2±f1*f3) на поддеревья, соответствующие формулам ((f1±f2)*f3) и (f1*(f2±f3)).


Инструкция по пользовательскому интерфейсу:  
Пункт 1: Нажмите, если хотите создать новое дерево выражений. Введите корректное инфиксное выражение( Разрешённые символы - "01234567890()-+/*"+ нижний и верхний регистр английского алфавита ). Если в нём есть переменные, последовательно введите значение для каждой переменной.  

Пункт 2: Нажмите, если хотите изменить значения переменных. Если в дереве есть переменные, последовательно введите новое значение для каждой переменной.  

Пункт 3: Нажмите, если хотите упростить дерево по шаблонам (f1*f3±f2*f3) и (f1*f2±f1*f3) на ((f1±f2)*f3) и (f1*(f2±f3)) соответственно.  

Пункт 4: Нажмите, если хотите полностью очистить дерево выражений.  

Пункт 5: Нажмите, если хотите узнать, какие ошибки могут возникнуть после ввода инфиксного выражения и какие ошибки могут отображаться после построения дерева выражений.  


Пример использования:  
1 . "Введите инфиксную запись выражения - "; user>>(2*a)-(4*a); "Введите значение для переменной a: ";user>>4;  
Вывод:  
    /-(a)
  /-(*)
  | \-(4)
  (-)
  | /-(a)
  \-(*)
    \-(2)
  
  Инфиксная запись выражения - 2 * a - 4 * a  
  Значения переменных: a=4;  
  
  Значение выражения при указанных значений переменных -  -8  

2. Упростить дерево выражений;  
Вывод:  
  /-(a)
  (*)
  | /-(4)
  \-(-)
    \-(2)
  
  Инфиксная запись выражения - (2 - 4) * a  
  Значения переменных: a=4;  
  
  Значение выражения при указанных значений переменных -  -8  

3. Изменить значения переменных; "Введите значение для переменной a: ";user>>-2;    
Вывод:  
  /-(a)
  (*)
  | /-(4)
  \-(-)
    \-(2)
  
  Инфиксная запись выражения - (2 - 4) * a  
  Значения переменных: a=-2;  
  
  Значение выражения при указанных значений переменных -  4  

4. Очистить дерево выражений;  
Вывод:  
  (0)
  
  Инфиксная запись выражения - 0  
  Значения переменных:  
  Значение выражения при указанных значений переменных -  0  

5. Памятка по использованию;  
Вывод:  
    Возможные ошибки при вводе инфиксной формы:
   
    1. Внезапная '(' или ')' - (2+3, 2+3), ((2+3)
    2. Не найдена ) - (1+2, 1+(2/3
    3. Глубина вложения скобок превышает 10 - (((((((((((1+1)+1)+1)+1)+1)+1)+1)+1)+1)+1)+1)
    4. Неполное выражение - 1+1+
    5. Недопустимый символ в выражении - !34}324{, привет
    6. Неожиданное число - 1+3 3
    7. Неожиданная переменная - 1+fd
    8. Неожиданный оператор - 1++2, 4//2
    9. Одно из чисел превышает значение в 2.147.483.647 - 3000000000+1
    10. Деление на 0 - 5/0
    11. Множественный унарный минус - 5+--2, --2
    12. Урарный минус после числа - (2+3-)
   
    Возможные ошибки при выводе значения выражения:
    
    1. Переполнение int, результат неверный - возникает, когда в холе вычислений значения дерева
    выражения получаются числа, не входящие в диапазон int (-2147483648,2147483647)












  
    
